// superscore - v0.2.4.1 - 2012-06-18
// https://github.com/DavidSouther/superscore
// Copyright (c) 2012 David Souther; Licensed MIT
(function(a,b){"use strict",a.mixin({indexBy:function(a,b){a=a||[],b=b||function(){return!1};for(var c=0,d=a.length;c<d;c++)if(b(a[c]))return c;return-1},noop:function(){},symmetricDifference:function(){return a.reduce(arguments,function(b,c){return a.union(a.difference(b,c),a.difference(c,b))})}}),a._extend=a.extend;var c=Object.prototype.hasOwnProperty;a.extend=function(){var b,c,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;typeof h=="boolean"&&(k=h,h=arguments[1]||{},i=2),typeof h!="object"&&!a.isFunction(h)&&(h={}),j===i&&(h=this,--i);for(;i<j;i++)if((b=arguments[i])!==null)for(c in b){d=h[c],e=b[c];if(h===e)continue;k&&e&&(a.isPlainObject(e)||(f=a.isArray(e)))?(f?(f=!1,g=d&&a.isArray(d)?d:[]):g=d&&a.isPlainObject(d)?d:{},h[c]=a.extend(k,g,e)):e!==undefined&&(h[c]=e)}return h},a.isPlainObject=function(b){if(!b||!a.isObject(b)||b.nodeType||a.isWindow(b))return!1;try{if(b.constructor&&!c.call(b,"constructor")&&!c.call(b.constructor.prototype,"isPrototypeOf"))return!1}catch(d){return!1}var e;for(e in b);return e===undefined||c.call(b,e)},a.isWindow=b?b.isWindow:function(a){return a!==null&&a===a.window}}).call(this,_,jQuery||null),function(a){var b={},c=function(a){return c.hash(a,!0)},d={};b.rvalid=/^\{?[0-9a-f]{8}\-?[0-9a-f]{4}\-?[0-9a-f]{4}\-?[0-9a-f]{4}\-?[0-9a-f]{12}\}?$/i,b.v4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=Math.random()*16|0,c=a==="x"?b:b&3|8;return c.toString(16)})},b.v5=function(a,b){var d=e(b||"00000000-0000-0000-0000-000000000000"),f=c.hash(d+a,!0),g=f.substring(0,8)+"-"+f.substring(8,12)+"-"+(parseInt(f.substring(12,16),16)&4095|20480).toString(16)+"-"+(parseInt(f.substring(16,20),16)&16383|32768).toString(16)+"-"+f.substring(20,32);return g};var e=function(a){if(!a.match(b.rvalid))return!1;var c=a.replace(/[\-{}]/g,""),d="";for(var e=0;e<c.length;e+=2)d+=String.fromCharCode(parseInt(c.charAt(e)+c.charAt(e+1),16));return d};c.hash=function(a,b){var e,f;b=typeof b=="undefined"?!0:b,b&&(a=d.encode(a));var g=[1518500249,1859775393,2400959708,3395469782];a+=String.fromCharCode(128);var h=a.length/4+2,i=Math.ceil(h/16),j=new Array(i);for(e=0;e<i;e++){j[e]=new Array(16);for(var k=0;k<16;k++)j[e][k]=a.charCodeAt(e*64+k*4)<<24|a.charCodeAt(e*64+k*4+1)<<16|a.charCodeAt(e*64+k*4+2)<<8|a.charCodeAt(e*64+k*4+3)}j[i-1][14]=(a.length-1)*8/Math.pow(2,32),j[i-1][14]=Math.floor(j[i-1][14]),j[i-1][15]=(a.length-1)*8&4294967295;var l=1732584193,m=4023233417,n=2562383102,o=271733878,p=3285377520,q=new Array(80),r,s,t,u,v;for(e=0;e<i;e++){for(f=0;f<16;f++)q[f]=j[e][f];for(f=16;f<80;f++)q[f]=c.ROTL(q[f-3]^q[f-8]^q[f-14]^q[f-16],1);r=l,s=m,t=n,u=o,v=p;for(f=0;f<80;f++){var w=Math.floor(f/20),x=c.ROTL(r,5)+c.f(w,s,t,u)+v+g[w]+q[f]&4294967295;v=u,u=t,t=c.ROTL(s,30),s=r,r=x}l=l+r&4294967295,m=m+s&4294967295,n=n+t&4294967295,o=o+u&4294967295,p=p+v&4294967295}return c.toHexStr(l)+c.toHexStr(m)+c.toHexStr(n)+c.toHexStr(o)+c.toHexStr(p)},c.f=function(a,b,c,d){switch(a){case 0:return b&c^~b&d;case 1:return b^c^d;case 2:return b&c^b&d^c&d;case 3:return b^c^d}},c.ROTL=function(a,b){return a<<b|a>>>32-b},c.toHexStr=function(a){var b="",c;for(var d=7;d>=0;d--)c=a>>>d*4&15,b+=c.toString(16);return b},d.encode=function(a){var b=a.replace(/[\u0080-\u07ff]/g,function(a){var b=a.charCodeAt(0);return String.fromCharCode(192|b>>6,128|b&63)});return b=b.replace(/[\u0800-\uffff]/g,function(a){var b=a.charCodeAt(0);return String.fromCharCode(224|b>>12,128|b>>6&63,128|b&63)}),b},d.decode=function(a){var b=a.replace(/[\u00e0-\u00ef][\u0080-\u00bf][\u0080-\u00bf]/g,function(a){var b=(a.charCodeAt(0)&15)<<12|(a.charCodeAt(1)&63)<<6|a.charCodeAt(2)&63;return String.fromCharCode(b)});return b=b.replace(/[\u00c0-\u00df][\u0080-\u00bf]/g,function(a){var b=(a.charCodeAt(0)&31)<<6|a.charCodeAt(1)&63;return String.fromCharCode(b)}),b},a.extend(a,{UUID:b,Utf8:d,Sha1:c})}.call(this,_),function(a){function c(a){var c=b[a]={},d,e;a=a.split(/\s+/);for(d=0,e=a.length;d<e;d++)c[a[d]]=!0;return c}var b={},d=Array.prototype.slice;a.Callbacks=function(d){d=d?b[d]||c(d):{};var e=[],f=[],g,h,i,j,k,l,m=function(b){var c,f,g,h,i;for(c=0,f=b.length;c<f;c++)g=b[c],a.isArray(g)?m(g):a.isFunction(g)&&(!d.unique||!o.has(g))&&e.push(g)},n=function(a,b){b=b||[],g=!d.memory||[a,b],h=!0,i=!0,l=j||0,j=0,k=e.length;for(;e&&l<k;l++)if(e[l].apply(a,b)===!1&&d.stopOnFalse){g=!0;break}i=!1,e&&(d.once?g===!0?o.disable():e=[]:f&&f.length&&(g=f.shift(),o.fireWith(g[0],g[1])))},o={add:function(){if(e){var a=e.length;m(arguments),i?k=e.length:g&&g!==!0&&(j=a,n(g[0],g[1]))}return this},remove:function(){if(e){var a=arguments,b=0,c=a.length;for(;b<c;b++)for(var f=0;f<e.length;f++)if(a[b]===e[f]){i&&f<=k&&(k--,f<=l&&l--),e.splice(f--,1);if(d.unique)break}}return this},has:function(a){if(e){var b=0,c=e.length;for(;b<c;b++)if(a===e[b])return!0}return!1},empty:function(){return e=[],this},disable:function(){return e=f=g=undefined,this},disabled:function(){return!e},lock:function(){return f=undefined,(!g||g===!0)&&o.disable(),this},locked:function(){return!f},fireWith:function(a,b){return f&&(i?d.once||f.push([a,b]):(!d.once||!g)&&n(a,b)),this},fire:function(){return o.fireWith(this,arguments),this},fired:function(){return!!h}};return o},a.Deferred=function(b){var c=a.Callbacks("once memory"),d=a.Callbacks("once memory"),e=a.Callbacks("memory"),f="pending",g={resolve:c,reject:d,notify:e},h={done:c.add,fail:d.add,progress:e.add,state:function(){return f},isResolved:c.fired,isRejected:d.fired,then:function(a,b,c){return i.done(a).fail(b).progress(c),this},always:function(){return i.done.apply(i,arguments).fail.apply(i,arguments),this},pipe:function(b,c,d){return a.Deferred(function(e){a.each({done:[b,"resolve"],fail:[c,"reject"],progress:[d,"notify"]},function(b,c){var d=b[0],f=b[1],g;a.isFunction(d)?i[c](function(){g=d.apply(this,arguments),g&&a.isFunction(g.promise)?g.promise().then(e.resolve,e.reject,e.notify):e[f+"With"](this===i?e:this,[g])}):i[c](e[f])})}).promise()},promise:function(a){if(!a)a=h;else for(var b in h)a[b]=h[b];return a}},i=h.promise({}),j;for(j in g)i[j]=g[j].fire,i[j+"With"]=g[j].fireWith;return i.done(function(){f="resolved"},d.disable,e.lock).fail(function(){f="rejected"},c.disable,e.lock),b&&b.call(i,i),i},a.when=function(b){function l(a){return function(b){c[a]=arguments.length>1?d.call(arguments,0):b,--h||j.resolveWith(j,c)}}function m(a){return function(b){g[a]=arguments.length>1?d.call(arguments,0):b,j.notifyWith(k,g)}}var c=d.call(arguments,0),e=0,f=c.length,g=new Array(f),h=f,i=f,j=f<=1&&b&&a.isFunction(b.promise)?b:a.Deferred(),k=j.promise();if(f>1){for(;e<f;e++)c[e]&&c[e].promise&&a.isFunction(c[e].promise)?c[e].promise().then(l(e),j.reject,m(e)):--h;h||j.resolveWith(j,c)}else j!==b&&j.resolveWith(j,f?[b]:[]);return k}}.call(this,_),function(a,b){"use strict",a.mixin({on:function(c,d,e){return a.isElement(c)&&b?b(c).on(d,e):(this.isString(c)&&(e=d,d=c,c=this),this.isObject(c.__event_handlers)||(c.__event_handlers={}),d in c.__event_handlers||(c.__event_handlers[d]=a.Callbacks("memory")),c.__event_handlers[d].add(e),this)},once:function(c,d,e){if(a.isElement(c)&&b)return b(c).one(d,e);var f=function(){a.off(c,d,e)};e=a.compose(f,e),this.on(c,d,e)},trigger:function(c,d,e){return a.isElement(c)&&b?b(c).trigger(d,e):(this.isString(c)&&(e=d,d=c,c=this),this.isObject(c.__event_handlers)&&d in c.__event_handlers&&c.__event_handlers[d].fireWith(c,e),this)},off:function(c,d,e){return a.isElement(c)&&b?b(c).off(d,e):(this.isString(c)&&(d=c,c=this),this.isObject(c.__event_handlers)&&d in c.__event_handlers&&c.__event_handlers[d].remove(e),this)}})}.call(this,_,jQuery||null),function(a,b){"use strict";var c=b?b.ajax:function(b){var c,d,e=a.Deferred();return d=window.ActiveXObject||XMLHttpRequest,c=new d("Microsoft.XMLHTTP"),c.open(b.type||(b.data?"POST":"GET"),b.url,!0),"overrideMimeType"in c&&c.overrideMimeType(b.dataType||"text/plain"),c.onreadystatechange=function(){var a;if(c.readyState===4){(a=c.status)===0||a===200?e.resolve(c.responseText):e.reject(new Error("Could not load "+b.url));return}e.notify(c)},b.data&&(c.setRequestHeader("Content-type","application/x-www-form-urlencoded"),c.setRequestHeader("Content-length",b.data.length),c.setRequestHeader("Connection","close")),c.send(b.data||null),e.promise()},d=b?b.get:function(b,c){return c=c||{},c.url=b,c.type="GET",c.data=null,a.ajax(c)},e=b?b.post:function(b,c){return c=c||{},c.url=b,c.type="POST",a.ajax(c)};a.mixin({ajax:c,get:d,post:e})}.call(this,_,jQuery||null);